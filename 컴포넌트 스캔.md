# 컴포넌트 스캔

## 1. 컴포넌트 스캔과 자동주입 시작하기

- `@ComponentScan` 을 설정정보 파일에 붙여주면 되고, `@Bean` 메서드를 적어주지 않아도 됨
- `@ComponentScan` : `@Component` 어노테이션이 붙은 클래스를 스캔해서 빈으로 등록
		- 빈 이름 기본 전략 : 클래스 명의 맨 앞글자만 소문자로 변경하여 사용
		- 빈 이름 직접 지정 : `@Component("abc")` 와 같이 지정

- `@Configuration` 도 코드를 열어보면, `@Component`가 있어서 스캔된 것
- `@ComponentScan( excludeFilters = @ComponentScan.Filter` : 특정 부분은 사전에 스프링에 등록하지 않도록 안내

```java
@ComponentScan(  
        excludeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION, classes = Configuration.class)  
)
```

이 부분은 기존의 AppConfig 와 충돌하지 않도록 하기 위한 부분!

- 자동의존관계 주입

(예시) - 생성자 메서드 위에 붙이기

```java
@Autowired  
public MemberServiceImpl(MemberRepository memberRepository) {  
    this.memberRepository = memberRepository;  
}
```

> 생성자 인자가 스프링 빈으로 등록되어 있는지 확인 후 스프링 빈 생성
> 생성자에서 의존관계도 한번에 주입받을 수 있음

```java
package hello.core;  
  
import hello.core.member.MemberService;  
import org.junit.jupiter.api.Test;  
import org.springframework.context.annotation.AnnotationConfigApplicationContext;  
  
import static org.assertj.core.api.Assertions.assertThat;  
  
class AutoAppConfigTest {  
  
    @Test  
  void basicScan() {  
        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(AutoAppConfig.class);  
        MemberService memberService = context.getBean(MemberService.class);  
        assertThat(memberService).isInstanceOf(MemberService.class);  
    }  
}
```

필요한 서비스, 레포지토리에 `@ComponentScan`, `@Autowired`을 달아주고 위의 테스트를 진행하면 

```
Creating shared instance of singleton bean 'autoAppConfig'
...
Autowiring by type from bean name 'memberServiceImpl' via constructor to bean named 'memoryMemberRepository'
```

위와 같이 싱글톤 방식으로 생성되는 빈, 빈 내부에서 자동주입되는 빈을 확인해볼 수 있다

✅ Autowired 의존관계 자동 주입

- 스프링 컨테이너가 자동으로 해당 스프링 빈을 찾아서 주입
- 기본조회전략 : ~ApplicationContext.getBean(...) 과 동일


